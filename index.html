<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Simple Platformer</title>
  <style>
    body {
      margin: 0;
      background: #111;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
    }
    canvas {
      background: #222;
      border: 2px solid #555;
    }
  </style>
</head>
<body>
  <canvas id="game" width="800" height="400"></canvas>

  <script>
    const canvas = document.getElementById("game");
    const ctx = canvas.getContext("2d");

    const gravity = 0.6;
    const keys = {};

    const player = {
      x: 50,
      y: 300,
      w: 30,
      h: 30,
      vx: 0,
      vy: 0,
      speed: 4,
      jump: -12,
      grounded: false
    };

    const platforms = [
      { x: 0,   y: 360, w: 800, h: 40 },
      { x: 200, y: 300, w: 120, h: 20 },
      { x: 380, y: 250, w: 120, h: 20 },
      { x: 560, y: 200, w: 120, h: 20 }
    ];

    const goal = { x: 700, y: 160, w: 40, h: 40 };

    document.addEventListener("keydown", e => keys[e.code] = true);
    document.addEventListener("keyup",   e => keys[e.code] = false);

    function update() {
      // Horizontal movement
      if (keys["ArrowLeft"])  player.vx = -player.speed;
      else if (keys["ArrowRight"]) player.vx = player.speed;
      else player.vx = 0;

      // Jump
      if (keys["Space"] && player.grounded) {
        player.vy = player.jump;
        player.grounded = false;
      }

      // Gravity
      player.vy += gravity;

      // Apply movement
      player.x += player.vx;
      player.y += player.vy;

      // Platform collision
      player.grounded = false;
      for (const p of platforms) {
        if (
          player.x < p.x + p.w &&
          player.x + player.w > p.x &&
          player.y < p.y + p.h &&
          player.y + player.h > p.y
        ) {
          if (player.vy > 0) {
            player.y = p.y - player.h;
            player.vy = 0;
            player.grounded = true;
          }
        }
      }

      // Bounds
      if (player.x < 0) player.x = 0;
      if (player.x + player.w > canvas.width)
        player.x = canvas.width - player.w;

      // Win condition
      if (
        player.x < goal.x + goal.w &&
        player.x + player.w > goal.x &&
        player.y < goal.y + goal.h &&
        player.y + player.h > goal.y
      ) {
        alert("You win!");
        location.reload();
      }
    }

    function draw() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);

      // Player
      ctx.fillStyle = "#4CAF50";
      ctx.fillRect(player.x, player.y, player.w, player.h);

      // Platforms
      ctx.fillStyle = "#888";
      platforms.forEach(p =>
        ctx.fillRect(p.x, p.y, p.w, p.h)
      );

      // Goal
      ctx.fillStyle = "#FFD700";
      ctx.fillRect(goal.x, goal.y, goal.w, goal.h);
    }

    function loop() {
      update();
      draw();
      requestAnimationFrame(loop);
    }

    loop();
  </script>
</body>
</html>
